var __awaiter=this&&this.__awaiter||function(e,a,r,d){return new(r=r||Promise)(function(n,t){function o(e){try{c(d.next(e))}catch(e){t(e)}}function i(e){try{c(d.throw(e))}catch(e){t(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,i)}c((d=d.apply(e,a||[])).next())})};let postApi="https://jsonplaceholder.typicode.com/posts",apiData=!1,isFetching=!1;function fetchTodo(t){return __awaiter(this,void 0,void 0,function*(){if(!isFetching){isFetching=!0;try{var e=yield fetch(t);if(e.ok)return yield e.json();throw new Error("Network response was not ok")}catch(e){console.error("There was a problem with the fetch operation:",e)}}})}function showClickedPost(t){document.querySelectorAll(".post").forEach(e=>{e.classList.add("hidden"),t.classList.remove("hidden"),null!=(e=document.querySelector(".back-button"))&&e.classList.remove("hidden")})}function registerBackToPostClickHandler(){let t=document.querySelector(".back-button"),e=document.querySelectorAll(".post");t.addEventListener("click",()=>{e.forEach(e=>{e.classList.remove("hidden"),t.classList.add("hidden")})})}function appendData(e){let n=document.querySelector(".post-container");e.forEach(e=>{var t=document.createElement("div");t.className="post",t.innerHTML=e.title,t.addEventListener("click",e=>{showClickedPost(e.target)}),n.appendChild(t)})}function clickHandler(){return __awaiter(this,void 0,void 0,function*(){var e;!1===apiData&&(e=yield fetchTodo(postApi))&&(appendData(e),apiData=!0,registerBackToPostClickHandler())})}window.onload=()=>{document.getElementById("fetch-api-button").addEventListener("click",clickHandler)};export{clickHandler};
//# sourceMappingURL=../maps/src/main.js.map
